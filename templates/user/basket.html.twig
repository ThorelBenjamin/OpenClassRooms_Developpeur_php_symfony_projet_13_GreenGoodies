{% extends 'base.html.twig' %}

{% block title %}Panier{% endblock %}

{% block body %}
    <div class="basket">
        <div class="basket-container">
            <h2>Mon panier</h2>
            <a href="{{ path('app_basket_clear') }}" class="basket-clear">x Vider le panier</a>
            {% if order.orderItems is empty %}
                <p>Votre panier est vide.</p>
            {% else %}
                <div class="basket-cards">
                    {% for item in order.orderItems %}
                    <a href="{{ path('product.show', {'id': item.product.id}) }}" class="basket-card-link">
                        <div class="basket-card">
                            <div>
                                <img src="{{ asset('img/article/' ~ item.product.picture) }}" alt="picture product">
                            </div>
                            <div class="basket-text">
                                <h3>{{ item.product.name }}</h3>
                                <p>Quantité : {{ item.quantity }}</p>
                                <p>{{ (item.quantity * item.product.price)|number_format(2, ',', ' ') }} €</p>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
                <div class="basket-price">
                    <h4>Total panier : <span class="basket-total">{{ order.orderPrice|number_format(2, ',', ' ') }} € </span></h4>
                    <p>Frais de livraison : Offert</p>
                </div>
                <div class="basket_valid">
                    <form action="{{ path('app_basket_validate') }}" method="post">
                        <input type="hidden" name="_token" value="{{ csrf_token('validate_basket') }}">
                        <button type="submit">Valider la commande</button>
                    </form>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
